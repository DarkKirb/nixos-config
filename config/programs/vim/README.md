Heavily based on https://github.com/syberant/nix-config/tree/master/configuration/home-manager/modules/neovim
